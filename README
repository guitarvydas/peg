A couple of experiments using the PEG parser "esrap".

Goals:

1. See that PEG grammars can be used to create read macros.

2. Can we program in a different syntax inside #{ ... } and have it converted to CL syntax?  E.G., can we write prolog code in prolog syntax and have it compile to CL?


How to load:

Currently, in this early stage, use the listener:

(progn 
  (ql:quickload "esrap")
  (ql:quickload "cl-heredoc")
  (set-dispatch-macro-character #\# #\> #'cl-heredoc:read-heredoc)
  (ql:register-local-projects)
  (compile-file "peg.lisp")
  (load "peg")
  (compile-file "pegself.lisp")
  (load "pegself")
  (peg-grammar::pegself))

regression test (manual at the moment):

> (in-package :peg-grammar)
> (pegself)
cut the result into regress.lisp and get rid of the surround progn
compile regress.lisp
compile pegself-regress.lisp
> (rpegself)
and compare the results with the contents of regress.lisp
